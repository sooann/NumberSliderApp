<html>
    <body>
        <button id="btnStart">Start</button>
        <div id="divContent">

        </div>
    </body>
    <script>
        function mix(){
            var i, j, c = 0;
            var pcs = new Array();
            for (i = 0; i <= siz; i++) pcs[i] = i;
            pcs[siz - 1] = -1; pcs[siz - 2] = -1;
            for (i = 0; i < hgh; i++) {
                for (j = 0; j < wid; j++) {
                    k = Math.floor(Math.random() * pcs.length);
                    posit[c] = pcs[k];
                    if (pcs[k] == siz) { blnkx = j; blnky = i; }
                    pcs[k] = pcs[pcs.length - 1];
                    pcs.length--;
                    c++;
                }
            }
            mode = 1;
            filltwo();
        }

        function filltwo() {
                //First fill in last two tiles.
                var s1 = -1;
                var s2 = -1;
                for (var i = 0; i <= siz; i++) {
                    if (posit[i] == -1) {
                        if (s1 < 0) {
                            s1 = i;
                            posit[s1] = siz - 1;
                        } else {
                            s2 = i;
                            posit[s2] = siz - 2;
                            break;
                        }
                    }
                }
                //check permutation parity
                var c = 0;
                for (var i = 1; i <= siz; i++) {
                    for (var j = 0; j < i; j++) {
                        if (posit[j] > posit[i]) c++;
                    }
                }
                //Check position of blank space; move to bottom right
                c += (wid - 1) - blnkx + (hgh - 1) - blnky;

                //if parity odd then swap
                if (c & 1) {
                    posit[s1] = siz - 2;
                    posit[s2] = siz - 1;
                }
            }
    </script>
</html>